"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var toType$1=function(r){return{}.toString.call(r).toLowerCase().slice(8,-1)},checkArgTypes=function(r,t){for(var e,n,u=0,c=(r=Array.prototype.slice.call(r)).length;u<c;++u)if(e=toType$1(r[u]),"-any"!==(n=t[u]))if("array"===toType$1(n)){for(var o=!1,i=0,a=n.length;i<a;++i)o=o||e===n[i];if(!o)throw new TypeError("Expected one of ["+n.join(", ")+"] given '"+e+"' for argument at index "+u)}else if(e!==n)throw new TypeError("Expected '"+n+"' given '"+e+"' for argument at index "+u)};checkArgTypes.prototype.toType=toType$1;var index=checkArgTypes,_has=function(r,t){return Object.prototype.hasOwnProperty.call(t,r)},_objectAssign=function(r){if(null==r)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),e=1,n=arguments.length;e<n;){var u=arguments[e];if(null!=u)for(var c in u)_has(c,u)&&(t[c]=u[c]);e+=1}return t},_assign="function"==typeof Object.assign?Object.assign:_objectAssign,_isPlaceholder=function(r){return null!=r&&"object"==typeof r&&!0===r["@@functional/placeholder"]},_curry1=function(r){return function t(e){return 0===arguments.length||_isPlaceholder(e)?t:r.apply(this,arguments)}},_curry2=function(r){return function t(e,n){switch(arguments.length){case 0:return t;case 1:return _isPlaceholder(e)?t:_curry1(function(t){return r(e,t)});default:return _isPlaceholder(e)&&_isPlaceholder(n)?t:_isPlaceholder(e)?_curry1(function(t){return r(t,n)}):_isPlaceholder(n)?_curry1(function(t){return r(e,t)}):r(e,n)}}},merge=_curry2(function(r,t){return _assign({},r,t)}),pick=_curry2(function(r,t){for(var e={},n=0;n<r.length;)r[n]in t&&(e[r[n]]=t[r[n]]),n+=1;return e}),_arity=function(r,t){switch(r){case 0:return function(){return t.apply(this,arguments)};case 1:return function(r){return t.apply(this,arguments)};case 2:return function(r,e){return t.apply(this,arguments)};case 3:return function(r,e,n){return t.apply(this,arguments)};case 4:return function(r,e,n,u){return t.apply(this,arguments)};case 5:return function(r,e,n,u,c){return t.apply(this,arguments)};case 6:return function(r,e,n,u,c,o){return t.apply(this,arguments)};case 7:return function(r,e,n,u,c,o,i){return t.apply(this,arguments)};case 8:return function(r,e,n,u,c,o,i,a){return t.apply(this,arguments)};case 9:return function(r,e,n,u,c,o,i,a,s){return t.apply(this,arguments)};case 10:return function(r,e,n,u,c,o,i,a,s,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},_curryN=function r(t,e,n){return function(){for(var u=[],c=0,o=t,i=0;i<e.length||c<arguments.length;){var a;i<e.length&&(!_isPlaceholder(e[i])||c>=arguments.length)?a=e[i]:(a=arguments[c],c+=1),u[i]=a,_isPlaceholder(a)||(o-=1),i+=1}return o<=0?n.apply(this,u):_arity(o,r(t,u,n))}},curryN=_curry2(function(r,t){return 1===r?_curry1(t):_arity(r,_curryN(r,[],t))}),_pipe=function(r,t){return function(){return t.call(this,r.apply(this,arguments))}},_curry3=function(r){return function t(e,n,u){switch(arguments.length){case 0:return t;case 1:return _isPlaceholder(e)?t:_curry2(function(t,n){return r(e,t,n)});case 2:return _isPlaceholder(e)&&_isPlaceholder(n)?t:_isPlaceholder(e)?_curry2(function(t,e){return r(t,n,e)}):_isPlaceholder(n)?_curry2(function(t,n){return r(e,t,n)}):_curry1(function(t){return r(e,n,t)});default:return _isPlaceholder(e)&&_isPlaceholder(n)&&_isPlaceholder(u)?t:_isPlaceholder(e)&&_isPlaceholder(n)?_curry2(function(t,e){return r(t,e,u)}):_isPlaceholder(e)&&_isPlaceholder(u)?_curry2(function(t,e){return r(t,n,e)}):_isPlaceholder(n)&&_isPlaceholder(u)?_curry2(function(t,n){return r(e,t,n)}):_isPlaceholder(e)?_curry1(function(t){return r(t,n,u)}):_isPlaceholder(n)?_curry1(function(t){return r(e,t,u)}):_isPlaceholder(u)?_curry1(function(t){return r(e,n,t)}):r(e,n,u)}}},_xwrap=function(){function r(r){this.f=r}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(r){return r},r.prototype["@@transducer/step"]=function(r,t){return this.f(r,t)},function(t){return new r(t)}}(),bind=_curry2(function(r,t){return _arity(r.length,function(){return r.apply(t,arguments)})}),_isArray=Array.isArray||function(r){return null!=r&&r.length>=0&&"[object Array]"===Object.prototype.toString.call(r)},_isString=function(r){return"[object String]"===Object.prototype.toString.call(r)},isArrayLike=_curry1(function(r){return!!_isArray(r)||!!r&&("object"==typeof r&&(!_isString(r)&&(1===r.nodeType?!!r.length:0===r.length||r.length>0&&(r.hasOwnProperty(0)&&r.hasOwnProperty(r.length-1)))))}),_reduce=function(){function r(r,t,e){for(var n=0,u=e.length;n<u;){if((t=r["@@transducer/step"](t,e[n]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return r["@@transducer/result"](t)}function t(r,t,e){for(var n=e.next();!n.done;){if((t=r["@@transducer/step"](t,n.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=e.next()}return r["@@transducer/result"](t)}function e(r,t,e){return r["@@transducer/result"](e.reduce(bind(r["@@transducer/step"],r),t))}var n="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(u,c,o){if("function"==typeof u&&(u=_xwrap(u)),isArrayLike(o))return r(u,c,o);if("function"==typeof o.reduce)return e(u,c,o);if(null!=o[n])return t(u,c,o[n]());if("function"==typeof o.next)return t(u,c,o);throw new TypeError("reduce: list must be array or iterable")}}(),reduce=_curry3(_reduce),_checkForMethod=function(r,t){return function(){var e=arguments.length;if(0===e)return t();var n=arguments[e-1];return _isArray(n)||"function"!=typeof n[r]?t.apply(this,arguments):n[r].apply(n,Array.prototype.slice.call(arguments,0,e-1))}},slice=_curry3(_checkForMethod("slice",function(r,t,e){return Array.prototype.slice.call(e,r,t)})),tail=_curry1(_checkForMethod("tail",slice(1,1/0))),pipe=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return _arity(arguments[0].length,reduce(_pipe,arguments[0],tail(arguments)))},assoc=_curry3(function(r,t,e){var n={};for(var u in e)n[u]=e[u];return n[r]=t,n}),dissoc=_curry2(function(r,t){var e={};for(var n in t)e[n]=t[n];return delete e[r],e}),dissocPath=_curry2(function r(t,e){switch(t.length){case 0:return e;case 1:return dissoc(t[0],e);default:var n=t[0],u=Array.prototype.slice.call(t,1);return null==e[n]?e:assoc(n,r(u,e[n]),e)}}),_isInteger=Number.isInteger||function(r){return r<<0===r},assocPath=_curry3(function r(t,e,n){if(0===t.length)return e;var u=t[0];if(t.length>1){var c=_has(u,n)?n[u]:_isInteger(t[1])?[]:{};e=r(Array.prototype.slice.call(t,1),e,c)}if(_isInteger(u)&&_isArray(n)){var o=[].concat(n);return o[u]=e,o}return assoc(u,e,n)}),_isTransformer=function(r){return"function"==typeof r["@@transducer/step"]},_dispatchable=function(r,t,e){return function(){if(0===arguments.length)return e();var n=Array.prototype.slice.call(arguments,0),u=n.pop();if(!_isArray(u)){for(var c=0;c<r.length;){if("function"==typeof u[r[c]])return u[r[c]].apply(u,n);c+=1}if(_isTransformer(u))return t.apply(null,n)(u)}return e.apply(this,arguments)}},_map=function(r,t){for(var e=0,n=t.length,u=Array(n);e<n;)u[e]=r(t[e]),e+=1;return u},_xfBase={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}},_xmap=function(){function r(r,t){this.xf=t,this.f=r}return r.prototype["@@transducer/init"]=_xfBase.init,r.prototype["@@transducer/result"]=_xfBase.result,r.prototype["@@transducer/step"]=function(r,t){return this.xf["@@transducer/step"](r,this.f(t))},_curry2(function(t,e){return new r(t,e)})}(),_isArguments=function(){var r=Object.prototype.toString;return"[object Arguments]"===r.call(arguments)?function(t){return"[object Arguments]"===r.call(t)}:function(r){return _has("callee",r)}}(),keys=function(){var r=!{toString:null}.propertyIsEnumerable("toString"),t=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],e=function(){return arguments.propertyIsEnumerable("length")}(),n=function(r,t){for(var e=0;e<r.length;){if(r[e]===t)return!0;e+=1}return!1};return _curry1("function"!=typeof Object.keys||e?function(u){if(Object(u)!==u)return[];var c,o,i=[],a=e&&_isArguments(u);for(c in u)!_has(c,u)||a&&"length"===c||(i[i.length]=c);if(r)for(o=t.length-1;o>=0;)_has(c=t[o],u)&&!n(i,c)&&(i[i.length]=c),o-=1;return i}:function(r){return Object(r)!==r?[]:Object.keys(r)})}(),map=_curry2(_dispatchable(["map"],_xmap,function(r,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return curryN(t.length,function(){return r.call(this,t.apply(this,arguments))});case"[object Object]":return _reduce(function(e,n){return e[n]=r(t[n]),e},{},keys(t));default:return _map(r,t)}})),lens=_curry2(function(r,t){return function(e){return function(n){return map(function(r){return t(r,n)},e(r(n)))}}}),path=_curry2(function(r,t){for(var e=t,n=0;n<r.length;){if(null==e)return;e=e[r[n]],n+=1}return e}),lensPath=_curry1(function(r){return lens(path(r),assocPath(r))}),always=_curry1(function(r){return function(){return r}}),over=function(){var r=function(t){return{value:t,map:function(e){return r(e(t))}}};return _curry3(function(t,e,n){return t(function(t){return r(e(t))})(n).value})}(),set$1=_curry3(function(r,t,e){return over(r,always(t),e)}),view=function(){var r=function(r){return{value:r,map:function(){return this}}};return _curry2(function(t,e){return t(r)(e).value})}(),toType=index.prototype.toType,createAction=curryN(2,function(r,t,e){index(arguments,["string","-any",["object","undefined"]]);var n={type:r,payload:t};return e?merge(n,{extra:pick(["meta","error"],e)}):n}),ATOM_SET="ATOM_SET",setAction=createAction(ATOM_SET),set=function(r,t){return setAction({path:"array"===toType(r)?r:[r],value:t})},ATOM_UPDATE="ATOM_UPDATE",updateAction=createAction(ATOM_UPDATE),update=function(r,t){return updateAction({path:"array"===toType(r)?r:[r],value:t})},ATOM_REMOVE="ATOM_REMOVE",removeAction=createAction(ATOM_REMOVE),remove=function(r){return removeAction({path:"array"===toType(r)?r:[r]})},atomSetReducer=function(r,t){var e=r.path,n=r.value,u=lensPath(e);return set$1(u,n,t)},atomUpdateReducer=function(r,t){var e=r.path,n=r.value,u=lensPath(e),c=pipe(over(u,toType),view(u))(t),o=toType(n);if(c===o){if("array"===o)return over(u,function(r){return r.concat(n)},t);if("object"===o)return over(u,function(r){return merge(r,n)},t)}return set$1(u,n,t)},atomRemoveReducer=function(r,t){var e=r.path;return dissocPath(e,t)},reducer=function(r,t){var e=r.type,n=r.payload;switch(e){case ATOM_SET:return atomSetReducer(n,t);case ATOM_UPDATE:return atomUpdateReducer(n,t);case ATOM_REMOVE:return atomRemoveReducer(n,t);default:return t}};exports.createAction=createAction,exports.set=set,exports.update=update,exports.remove=remove,exports.reducer=reducer;
